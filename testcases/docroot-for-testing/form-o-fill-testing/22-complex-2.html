<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Form-O-Fill Testpage</title>
    <link href="styles.css" rel="stylesheet" type="text/css" />
  </head>
  <body class="test-no-log">
    <style>
      input[type=text] {
        width: 300px;
      }
    </style>
    <h1>TESTING SERVER RUNNING - 2</h1>
    autorun is set to <span id="timer">4000</span> msecs...<br />

    <div class="element">ELEMENT1</div>
    <div class="element">ELEMENT2</div>

    Target 0:<input id="target0" type="text" value="value from pageload" /> ("set by setupContent")</br />
    Target 1:<input id="target1" type="text" value="value from pageload" /> ("value by json.json via jQuery.getJSON"; only works when coming from first page!)</br />
    Target 2:<input id="target2" type="text" value="value from pageload" /> (Libs.chance.name: some name)</br />
    Target 3:<input id="target3" type="text" value="value from pageload" /> (Libs.moment.format: "2015-10-19T21:38:52+02:00")</br />
    Target 4:<input id="target4" type="text" value="value from pageload" /> (Libs.h.click: "clicked")</br />
    Target 5:<input id="target5" type="text" value="value from pageload" /> (Libs.customFunction: "returned by customerFunction")</br />
    Target 6:<input id="target6" type="text" value="value from pageload" /> (context.url: "localhost")</br />
    Target 7:<input id="target7" type="text" value="value from pageload" /> (context.findHtml: "&lt;title>Form-O-Fill Testpage&lt;/title>")</br />
    Target 8:<input id="target8" type="text" value="value from pageload" /> (shared rules: "set by shared rule")</br />
    Target 9:<input id="target9" type="text" value="value from pageload" /> (field def: screenshot)</br />
    Target 10:<input id="target10" type="text" value="value from pageload" /> (field def: Libs.h.copyValue : "&lt;title>Form-O-Fill Testpage&lt;/title>")</br />
    Target 11:<input id="target11" type="text" value="value from pageload" /> (import URL: "remote import!"; Need to click the remote rule in popup!)</br />
    Target 12:<input id="target12" type="text" value="value from pageload" /> ("set by teardownContent")</br />
    Target 13:<input id="target13" type="text" value="" /> (field def: onlyEmpty: "was empty")</br />
    Target 14:<input id="target14" type="text" value="" /> (Libs.h.getVar: "2")</br />
    Target 15:<iframe src="22-complex-iframe.html" style="height: 30px" id="target15"></iframe> (within: "set by rule")</br />
    Target 16:<input id="target16" type="text" value="" /> (ES2016 arrow function: ES2015 =&gt; &lt;title&gt;Form-O-Fill Testpage&lt;/title&gt;)</br />
    Target 17:<input id="target17" type="text" value="value from pageload" /> (context.findHtml (multiple matches): "ELEMENT1,ELEMENT2"; Uses Libs.h.stripTags)<br />
    Target 18:<iframe src="22-complex-iframe2-click-handler.html" style="height: 30px" id="target18"></iframe> (Libs.h.click works with handler attached to field; "handler wrote this")<br />
    Target 19:<input id="target19" type="text" value="value from pageload" /> (Libs.math: "43 cm")<br />
    Target 20:<input id="target20" type="text" value="value from pageload" /> (rule.loadContentJs: "Used aLib '#target20'"; defunct for now!)<br />
    Target 21:<a href="javascript:void(0);" id="target21">&lt;a&gt;value from pageload&lt;/a&gt;</a> (clicking a &lt;a&gt;; "clicked")<br />
    Target 22:<input id="target22" type="text" value="value from pageload" /> (Fire INPUT and CHANGE event after filling: "INPUT CHANGE")<br />
    Target 23-1:<input id="target23-1" name="target23" type="text" value="value from pageload" /> (Different value than next one; Testing if value function is executed for every match separatly)<br />
    Target 23-2:<input id="target23-2" name="target23" type="text" value="value from pageload" /> (Different value than previous one)<br/>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="22-complex.js"></script>
    <script>
      var time = 4000;
      var itime = 100;
      var $timer = document.querySelector("#timer");

      var countdown = function() {
        time = time - itime;
        if(time <= 0) {
          clearInterval(timer);
        }
        $timer.innerText = time;
      };
      
      var timer = setInterval(countdown, itime);

      var $target22 = document.querySelector("#target22");
      $target22.addEventListener("input", () => {
        $target22.value = "INPUT ";
      });

      $target22.addEventListener("change", () => {
        $target22.value = $target22.value + "CHANGE";
      });


    </script>

  </body>
</html>
